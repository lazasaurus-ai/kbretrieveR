% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/parse_results.R
\name{parse_kb_retrieve}
\alias{parse_kb_retrieve}
\title{Parse /retrieve JSON into tibble (robust, with metadata)}
\arguments{
\item{out}{Parsed JSON (list) returned by \code{jsonlite::fromJSON(..., simplifyVector = FALSE)} or \code{httr::content(resp, as = "parsed")}.}
}
\value{
A tibble with columns: \code{score} (numeric, may be NA), \code{uri} (character, may be NA),
\code{text} (character), \code{source_uri}, \code{chunk_id}, \code{data_source_id}, \code{type}.
}
\description{
Robust parser for the Bedrock Agent Runtime \verb{/retrieve} response.
It accepts multiple shapes for \code{retrievalResults}:
\itemize{
\item list of lists (expected)
\item list of JSON strings (each element is JSON text)
\item atomic scalars (e.g. numeric or string) â€” stored in \code{text} or moved to \code{score} if numeric-like
}
}
\details{
The returned tibble includes provenance columns:
\code{source_uri}, \code{chunk_id}, \code{data_source_id}, and \code{type} (when available).
}
\keyword{internal}
